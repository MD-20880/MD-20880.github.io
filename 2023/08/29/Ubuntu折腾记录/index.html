<!-- build time:Mon Apr 08 2024 00:09:26 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ubuntu折腾记录 [ Hexo ]</title><link rel="stylesheet" href="/css/mytheme.css"><link rel="stylesheet" href="/css/index.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="header"><div class="header-right"><div id="header-logo" class="logo"><img src="/favicon.ico" alt="logo"></div></div><div id="header-left"><div id="header-search-bar" class="search-bar hide-on-small"><input type="text" placeholder="Search.."> <button type="submit">Search</button></div><div class="header-tools hide-on-small"><a>登录 </a><a>注册</a></div><div id="menu-outer"><div id="menu-inner"><a href="/">Home</a> <a href="/about">About</a> <a href="/contact">Contact</a> <a href="/archives">Archives</a></div></div></div></div><div class="content-outer"><div class="content-inner"><article id="post"><h1>Ubuntu折腾记录</h1><h3 id="必要软件"><a class="markdownIt-Anchor" href="#必要软件">#</a> 必要软件</h3><p>这个软件列表是笔者安装自己的 Ubuntu 时会安装的所有软件<br>列表持续更新中……</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">==Softwares==</span><br><span class="line">SogouPinyin  </span><br><span class="line">Google Chrome   </span><br><span class="line">Visual Studio Code   </span><br><span class="line">neovim  </span><br><span class="line">nvchad  </span><br><span class="line">Picgo       <span class="comment">#图床上传软件  </span></span><br><span class="line">Logseq      <span class="comment">#知识图库软件  </span></span><br><span class="line">AppImageLauncher</span><br><span class="line"></span><br><span class="line">==apt installs==</span><br><span class="line"></span><br><span class="line">zsh</span><br><span class="line">oh-my-zsh</span><br><span class="line">tldr</span><br><span class="line">fcitx</span><br><span class="line">ffmpeg</span><br><span class="line">libx11-dev</span><br><span class="line">xserver-xorg-dev </span><br><span class="line">xorg-dev</span><br><span class="line">xorg </span><br><span class="line">openbox</span><br><span class="line">enpass</span><br><span class="line">python3-opencv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">== Fonts ==</span><br><span class="line"></span><br><span class="line">AurulentSansMNerdFont</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">== build ==</span><br><span class="line"></span><br><span class="line">virtualBox		<span class="comment">#Virtual Environment</span></span><br><span class="line">typst       		<span class="comment">#latex like formatting</span></span><br><span class="line">build-essential        	<span class="comment">#Essential Tools</span></span><br><span class="line">clang</span><br><span class="line">cmake</span><br><span class="line">vkpkg</span><br><span class="line">git </span><br><span class="line">docker</span><br><span class="line">rustlas</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="nvchad"><a class="markdownIt-Anchor" href="#nvchad">#</a> nvchad</h2><h4 id="效果"><a class="markdownIt-Anchor" href="#效果">#</a> 效果</h4><p><img src="https://raw.githubusercontent.com/MD-20880/PicBed/master/picsoutput.gif" alt=""></p><h4 id="安装过程"><a class="markdownIt-Anchor" href="#安装过程">#</a> 安装过程</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注意：在apt商店内下载的neovim版本较低，至少在0.9.0版本以上</span></span><br><span class="line">sudo apt install -y neovim</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/NvChad/NvChad ~/.config/nvim --depth 1 &amp;&amp; nvim</span><br></pre></td></tr></table></figure><h2 id="samba"><a class="markdownIt-Anchor" href="#samba">#</a> samba</h2><h4 id="效果-2"><a class="markdownIt-Anchor" href="#效果-2">#</a> 效果</h4><p>允许局域网内设备文件互传，实现局域网内 MACOS，WINDOWS，IPHONE 等设备的文件同步</p><p>注意：苹果设备自带的文件管理器对 smb 传输并不友好，需要使用新的文件管理器，例如 ES 文件管理器等</p><h4 id="安装过程-2"><a class="markdownIt-Anchor" href="#安装过程-2">#</a> 安装过程</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install samba <span class="comment">#安装Samba</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置 samba 服务器<br>在 <code>/etc/sambs/smb.conf</code> 的最后，加入</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[sharefolder]</span><br><span class="line">   path = /home/damien/Public/share</span><br><span class="line">   available = <span class="built_in">yes</span></span><br><span class="line">   guest ok = no</span><br><span class="line">   browseable = <span class="built_in">yes</span></span><br><span class="line">   writable = <span class="built_in">yes</span></span><br><span class="line">   valid <span class="built_in">users</span> = damien</span><br></pre></td></tr></table></figure><p>随后，对系统内的账户进行设置，你可以选择你当前使用的账户，或者自行新建一个账户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">smbpasswd -a pswd <span class="comment">#给SMB访问账号设置密码</span></span><br><span class="line"></span><br><span class="line">/etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>至此，linux 端配置完成</p><p>若要连接到服务器，在 linux 中使用 ifconfig 指令可以查找本机 IP 地址，并在链接服务器时使用 smb://IP_ADDRESS 进行连接即可。</p><h2 id="fcitx5"><a class="markdownIt-Anchor" href="#fcitx5">#</a> fcitx5</h2><h4 id="效果-3"><a class="markdownIt-Anchor" href="#效果-3">#</a> 效果</h4><p>允许使用各类输入法</p><h4 id="安装过程-3"><a class="markdownIt-Anchor" href="#安装过程-3">#</a> 安装过程</h4><p>直接上网下载搜狗输入法并直接使用 <code>sudo apt install ./PATH_TO_SOGOU</code> 安装.deb 文件即可，fcitx4 会被自动安装</p><p>注意：Ficitx 在安装时会被自动挂载到 X11 图形渲染模块下。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#若是以下指令输出Wayland，我们需要将X11的配置转移到Wayland下</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$XDG_SESSION_TYPE</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#<span class="doctag">TODO:</span> 这里需要找到对应写入文件，需要再查一下（）（）</span></span><br><span class="line">GTK_IM_MODULE=fcitx</span><br><span class="line">QT_IM_MODULE=fcitx</span><br><span class="line">XMODIFIERS=@im=fcitx</span><br></pre></td></tr></table></figure><h2 id="typst"><a class="markdownIt-Anchor" href="#typst">#</a> typst</h2><h4 id="效果-4"><a class="markdownIt-Anchor" href="#效果-4">#</a> 效果</h4><p>允许在本地有一个类似 latex 的强大 formatter！<br>用来生成 CV（逃</p><h4 id="安装过程-4"><a class="markdownIt-Anchor" href="#安装过程-4">#</a> 安装过程</h4><p>注意，不同的 linux 发布版有不同的发布渠道，在 Ubuntu 自带的 apt 中，没有对应的发布版本，因此我们通过 rustup 进行安装</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#为Ubunutu安装RustUp</span></span><br><span class="line">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装Typst</span></span><br><span class="line">cargo install --git https://github.com/typst/typst</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="oh-my-posh"><a class="markdownIt-Anchor" href="#oh-my-posh">#</a> oh-my-posh</h2><h4 id="效果-5"><a class="markdownIt-Anchor" href="#效果-5">#</a> 效果</h4><p><img src="https://raw.githubusercontent.com/MD-20880/PicBed/master/picsScreenshot%20from%202023-09-03%2014-47-07.png" alt=""></p><h4 id="安装"><a class="markdownIt-Anchor" href="#安装">#</a> 安装</h4><p>首先，新建一个文件夹来存放二进制文件，并将该文件夹加入到 PATH 中去<br>随后运行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://ohmyposh.dev/install.sh | bash -s -- -d <span class="string">&#x27;你的文件夹&#x27;</span></span><br></pre></td></tr></table></figure><p>此时，oh-my-posh 就已经安装完成了。接下来我们对它进行配置</p><p>笔者使用的是 zsh，所以就基于 zsh 来编写这个文档。当然，对于其他的 shell 来说配置过程也大同小异<br>将以下内容添加至～/.zshrc 中</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(oh-my-posh init zsh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>至此，就可以进行基本的使用了</p><h4 id="自定义"><a class="markdownIt-Anchor" href="#自定义">#</a> 自定义</h4><p>（目前笔者没有深入研究，简单带过）<br>想要使用网上看到的主题，我们需要上网找到主题对应的 json 文件<br>笔者使用的是 clean-detailed 主题，就以此为例子</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载json文件</span></span><br><span class="line">wget https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/clean-detailed.omp.json <span class="string">&quot;/你的文件目录/clean-detailed&quot;</span></span><br></pre></td></tr></table></figure><p>然后在～/.zshrc 中，将原有的启动指令修改为</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(oh-my-posh init zsh --config &#x27;你的文件目录/clean-detailed&#x27;)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>就可以使用主题了</p><h2 id="基于docker的hexo部署"><a class="markdownIt-Anchor" href="#基于docker的hexo部署">#</a> 基于 Docker 的 Hexo 部署</h2><p>详情参见<br><a target="_blank" rel="noopener" href="https://chunchengwei.github.io/ruan-jian/ji-yu-docker-de-hexo-bo-ke-da-jian/">https://chunchengwei.github.io/ruan-jian/ji-yu-docker-de-hexo-bo-ke-da-jian/</a></p><h2 id="obs直播推流"><a class="markdownIt-Anchor" href="#obs直播推流">#</a> OBS 直播推流</h2><p>笔者有一台 MACbook，还有一台装有 Ubuntu 的台式机作为本人的主力机。然而，本人看了一眼台式电脑单独配置摄像头的价格还是有些望而却步（尽管并不高，但对于目前没有稳定收入的我来说确实是没必要的设备）。因此，本人在想该怎样利用身边有的东西帮助自己整一个台式机用的摄像头。</p><p>简单的说一下历程，我自己身边有几台几近报废的华为手机，还有一个已经被我拆开来的旧笔记本电脑。首先想到的是能不能利用华为的 “超高清” 摄像头来制作一个电脑摄像头。可惜华为 Mate20 Pro 用的是莱卡摄像头，并没有查到需要应用摄像头所需要的（好像是 MIPI）转换板，在 MATE20 的开源资料中也没有反向查到莱卡相机相关的驱动程序相关代码，也只好作罢。而电脑屏幕又不是很想拆掉，打算改吧改吧做成移动屏幕，所以也没遭受我的毒手。</p><p>所以我想到的是利用 MACbook 的摄像头，利用 OBS 推流到到我的 Ubuntu 电脑中。使用 v4l2loopback module 生成虚拟摄像头，最后再使用 ffmpeg 拉流推送到虚拟摄像头中，达成效果。</p><p>首先在 mac 上使用 Docker (Docker 万岁) 部署 rtmp 服务器</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以下安装作为例子，实际安装详情请查看https://hub.docker.com/r/alqutami/rtmp-hls</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注意防火墙放行1935 和 8080 端口， MAC默认不自带防火墙</span></span><br><span class="line">docker pull alfg/nginx-rtmp</span><br><span class="line">docker run -it -p 1935:1935 -p 8080:80 --<span class="built_in">rm</span> nginx-rtmp</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>随后在 OBS 中设置推流地址为 rtmp:// 本机 ip:1935/stream</p><p>点击开始推流后，我们打开 https://localhost:8080/static 检查 rtmp 服务器推流信息， 可以看到已经有多个不同分辨率的推流正在进行<br><img src="https://ask.qcloudimg.com/http-save/yehe-6945550/8a4fddca882c25a0daedb68b6c73cc6e.jpeg" alt=""></p><p>此时，在同一个局域网内的机器已经可以通过使用拉流软件 (ffmpeg,vlc) 播放画面了<br>使用拉流软件访问<br><a href="rtmp://机器ip:1935/stream">rtmp:// 机器 ip:1935/stream</a>即可看到视频画面</p><p><img src="https://raw.githubusercontent.com/MD-20880/PicBed/master/picsScreenshot%20from%202023-09-07%2019-13-55.png" alt=""></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用ffplay进行播放</span></span><br><span class="line">ffplay rtmp://机器ip:1935/stream</span><br></pre></td></tr></table></figure><p>在使用 FFplay 进行播放时，需要 SDL 库的正确安装，SDL2 的安装将会在之后进行单独介绍</p><h2 id="各类小问题"><a class="markdownIt-Anchor" href="#各类小问题">#</a> 各类小问题</h2><h3 id="wayland-x11"><a class="markdownIt-Anchor" href="#wayland-x11">#</a> WAYLAND ? X11</h3><p>笔者在折腾的时候，对于 Linux 整体架构的理解并不深刻，导致很多的操作是知其然而不知其所以然。<br>看到了一个帖子，很清晰地描述了 Linux gui 相关的各个名词以及之间的相互关联，特此引用一下，帮助自己理解记忆，同时艾特一下膜拜一下大佬<br>原贴是<a href="https://keyou.github.io/blog/2018/12/18/Linux%E7%B3%BB%E7%BB%9FGUI%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">柯幽的博客</a>。各位可以围观一下<br><img src="https://raw.githubusercontent.com/MD-20880/PicBed/master/picsScreenshot%20from%202023-09-07%2019-20-59.png" alt=""></p><p>TO BE CONTINUE</p></article><div id="paginator"></div></div></div><div class="footer"><div class="footer-inner">Site by Damien Deng using <a target="_blank" rel="noopener" href="http://hexo.io">hexo blog framework</a>.<br><a href="/">Home</a></div></div><script src="/js/mytheme.js"></script></body></html><!-- rebuild by hrmmi -->